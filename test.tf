provider "wait" {

}

data "wait_tcp" "tcp" {
  host = "pasztor.at"
  port = 443
}

data "wait_http" "http" {
  url = "http://pasztor.at"
  ca_certificate_pem = <<EOF
-----BEGIN CERTIFICATE-----
MIIGXTCCBUWgAwIBAgISAx9dzIXy3j/x92jvWrs62qnxMA0GCSqGSIb3DQEBCwUA
MEoxCzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1MZXQncyBFbmNyeXB0MSMwIQYDVQQD
ExpMZXQncyBFbmNyeXB0IEF1dGhvcml0eSBYMzAeFw0yMDAzMzAxNjQ0MjdaFw0y
MDA2MjgxNjQ0MjdaMBUxEzARBgNVBAMTCnBhc3p0b3IuYXQwggIiMA0GCSqGSIb3
DQEBAQUAA4ICDwAwggIKAoICAQCqZbnNVApIQwUTHD5lGILw/6LCZTZk3FnDXxUF
wiz8GcMfCrNgtCdldE++CZConDWZ2pD5q2S3jNcyNW3WVSqhJdH3M0vs6b4Hliay
GRPJ7H0vsP/mRCNAfqic2fbJz8TpGeQltqCez1fVJKhL3akz24X7WgitxrvfK1TU
wvzlf1BYJnSPghB38F25wAfpH/w8jXU/RZjjdswQySiwUAz1ZIyj6iZZA6vgy56N
2u3/qt88T0vBFiABc1m/ZoH19NPmUghNwZuaDRci85WYxyjfJRWNwADcUPCA3WKX
OL3uPIkirYwZ2wktWY8xjimGK+e9msCyWr17BscgFjO/gY99zrHev0e1xA++hs2A
QGUB7boMjNJN8SzFt2rtK41VDc5/x11BpJSp7JrKOri3AE1eKQ245ZY+PIXXpt1Q
3Xkarj3J2LS4u4Dty5pjglu4eGztPvzvdaBeKpTqXu4wrHwDJGujKIw5+YUzJwTj
mzl6e2OrZCgvqn6DfMrZET1trd2P95qPxUNEVRXQhQyi4nQBIf4zXn/J724NSZRh
FAOCDr4sM8b1TQ2Dl3ljCTz3/QYPgfSP66gWC7irFIEwDHQXuF4SjMFsXWGtj4Il
f/6xAVFs/1MWZ9pF+LA7Z+EeXF9bsAkZVIEf6/v2QClKKuYEyGo8jnpafFyggMJI
I85ioQIDAQABo4ICcDCCAmwwDgYDVR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsG
AQUFBwMBBggrBgEFBQcDAjAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBTwPq5rMcr8
Utsl96OEcBsr9HsqFDAfBgNVHSMEGDAWgBSoSmpjBH3duubRObemRWXv86jsoTBv
BggrBgEFBQcBAQRjMGEwLgYIKwYBBQUHMAGGImh0dHA6Ly9vY3NwLmludC14My5s
ZXRzZW5jcnlwdC5vcmcwLwYIKwYBBQUHMAKGI2h0dHA6Ly9jZXJ0LmludC14My5s
ZXRzZW5jcnlwdC5vcmcvMCUGA1UdEQQeMByCCnBhc3p0b3IuYXSCDnd3dy5wYXN6
dG9yLmF0MEwGA1UdIARFMEMwCAYGZ4EMAQIBMDcGCysGAQQBgt8TAQEBMCgwJgYI
KwYBBQUHAgEWGmh0dHA6Ly9jcHMubGV0c2VuY3J5cHQub3JnMIIBBQYKKwYBBAHW
eQIEAgSB9gSB8wDxAHcA5xLysDd+GmL7jskMYYTx6ns3y1YdESZb8+DzS/JBVG4A
AAFxLItu6wAABAMASDBGAiEAz70yFlYtlbb7sxxs9ip5HJ2vW3Rc40yjJ8HOJy49
+nMCIQDGEGU52ydqBc3bs/1J2Krm/fKa7ltRQdjwHuqM6tdx3wB2AAe3XBvlfWj/
8bDGHSMVx7rmV3xXlLdq7rxhOhpp06IcAAABcSyLbxkAAAQDAEcwRQIhAOILnoJn
un/40A9Z4Clj9Gt8HWILTIctTdqvRVR4goFOAiAc7ueE7SjcIS3djwCZ4z8OWZs5
4MMwSJmVVdPUQP+GWzANBgkqhkiG9w0BAQsFAAOCAQEADYeQfIVt5PCFFlDCgTCA
MCm0/82j+DCCvC8u/pbi9MWbbqeQ33VJ7R361SOsM1B4SEMsJyuZCQTBUEVaGnU7
JTDNme6BUYpQvqain8T8hLXWxuqN8MRtUczvAj8Y0bGjhcyJwZ/LK7bTTKNtwIi6
Q9iMZeoQyPjeBCNG4EXePd2Xx0Tv0WuhxvLmVm9KDXS3bozhc8QO71atxdg02DpF
VcOxxh5hALkA3ED6Yu4YW/4TfQB7rtfM0XIndJtPiX5veUBX0Q51uQeVkYBS5zQs
ErVfGkSC03Hm995jDd5x5+HCWy3fOjfw7IV4AOr+xTty1OBiYc+earDd5s+GJ4uJ
aw==
-----END CERTIFICATE-----
EOF
}

output "tcp" {
  value = data.wait_tcp.tcp.host
}

output "http_status" {
  value = data.wait_http.http.response_status
}